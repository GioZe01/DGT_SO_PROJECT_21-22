<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sistemi Operativi 2021/22: Information about the project</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="unito_logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Sistemi Operativi 2021/22<span id="projectnumber">&#160;25-06-2022</span>
   </div>
   <div id="projectbrief">st: Giovanni Terzuolo</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Information about the project </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md0"></a>
GT_SO_PROJECT_21-22</h1>
<p >For more detail on the project see the <a href="../../docs/html/index.html">docs</a></p>
<h1><a class="anchor" id="autotoc_md1"></a>
Description of the project</h1>
<p >The project is meant to be an example of the use of IPC (Inter-Process Communication) between different processes; simulating a ledger. Utilizing the IPC, the project will be able to send and receive messages between different processes:</p>
<ul>
<li>A <b>master</b> for the handling of the simulation, the creation of the other processes, etc..</li>
<li>SO_USER_NUM number of <b>users</b>, each one of them will be able to send money to other users via transactions.</li>
<li>SO_NODE_NUM number of <b>nodes</b> that elaborate the transactions.</li>
</ul>
<p >For the full text of the project, please visit the <a href="../../docs/2021.12.19_consegna_progetto.pdf">Consegna Progetto</a>.\ The implementation follows the SYSTEM V IPC (Semaphores, Shared Memory, Message Queues) model and C89 standard.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Requirements</h1>
<ul>
<li>Doxygen: for rendering the documentation</li>
<li>Unix Sys: Tested on Ubuntu 21.10</li>
<li>GCC or GDB: make sure to set the <em><b>correct compiler flags into the Makefile</b></em></li>
<li>Cmake</li>
</ul>
<h1><a class="anchor" id="autotoc_md3"></a>
Installing</h1>
<p >Using .zip file:</p>
<div class="fragment"><div class="line">unzip gt-so-project-21-22.zip</div>
</div><!-- fragment --><p >Using git :zipper_mouth_face: :</p>
<div class="fragment"><div class="line">Not allowed by University of Turin </div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md4"></a>
Running</h1>
<div class="fragment"><div class="line">cd gt-so-project-21-22</div>
<div class="line">make all </div>
<div class="line">make run</div>
</div><!-- fragment --><p> <b>NOTE: make sure to have all the folders in the right place and checked the compiler fleg into the Makefile</b> </p>
<h1><a class="anchor" id="autotoc_md5"></a>
Information about the chosen implementation:</h1>
<p >For each IPC there is a specific implementation check the .h files to see which implementation is used and how it is implemented. Specifically for the message queue.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Message Queue</h2>
<p >There are 3 message queues with the respected <a href="../../src/local_lib/headers/glob.h">values</a> (click to see).</p><ol type="1">
<li>Master message queue whose messages are defined in the <a href="../../src/local_lib/headers/master_msg_report.h">master_msg_report</a> header.</li>
<li>Users message queue in which each user has its own priority queue of messages. The value of each process position is incremental with a delta described in <a href="../../src/local_lib/headers/user_msg_report.h">user_msg_report.h</a> header, so that when a process is created his value will be the one before + the delta.</li>
<li>Nodes message queue in which each node has its own priority queue of messages. The value of each process position is incremental with a delta described in <a href="../../src/local_lib/headers/node_msg_report.h">node_msg_report.h</a> header, so that when a process is created his value will be the one before + the delta. </li>
</ol>
<h2><a class="anchor" id="autotoc_md7"></a>
Shared Memory</h2>
<p >There are 2 shared memory with the respected <a href="../../src/local_lib/headers/glob.h">values</a> (click to see).</p><ol type="1">
<li>Shared mamory for the configuration of the simulation.</li>
<li>Shared memory for the ledger. Each of which has its own way of regulating the access to the shared memory via semaphores. In the respected header files you can find the details.</li>
</ol>
<h2><a class="anchor" id="autotoc_md8"></a>
Signals utilized by the project</h2>
<ul>
<li>SIGINT: used to terminate the program</li>
<li>SIGALRM: used to simulate the time of the program and make routine tasks by the processes</li>
<li>SIGUSR2: used by the Master to get the status of the processes</li>
<li>SIGUSR1: involved in the handling of a new node process (the node process is created by the Master)</li>
</ul>
<h2><a class="anchor" id="autotoc_md9"></a>
Master proc:</h2>
<p ><a class="anchor" id="autotoc_md10"></a> </p><h5>Activity:</h5>
<ol type="1">
<li>The master process read the conf file, creates all the necessary IPC resources starting from the semaphores and the shared memory. It creates a shm for the configuration in order to share between the processes the information about the number of users and the number of nodes and their positioning into the message queue, and in case of the nodes the friends of each node.</li>
<li>Proceeds to create the processes of the users and the nodes adding them to the shm for the configuration.</li>
<li>Fill the friends positioning into the shm for the configuration.</li>
<li>Configure a signal handler</li>
<li>start's the simulation utilizing a semaphore to sinchronize the processes.</li>
<li>Lunch a SIGALRM to print information about the current status of the simulation.</li>
<li>Wait for the SIGINT signal to terminate the program.</li>
</ol>
<p ><a class="anchor" id="autotoc_md11"></a> </p><h5>Additional info:</h5>
<p >While the node generate the processes they are added into a Linked List call ProcList which is and Abstract Data Type. For his implementation check the <a href="../../src/local_lib/process_info_list.c">process_info_list.c</a> file.\ The implementation of the ADT is based on the information acquired during the reading of the book "C Programming A Modern Approach" by K.N. King second edition for C89 and C99.</p>
<p >The printing of the information of the state of the simulation utilizes a merge sort algorithm on a linked list of <a class="el" href="process__info__list_8c.html">process_info_list.c</a>. Could have been done differently, but for the sake of simplicity I decided to use the merge sort algorithm which is a stable sort for linked lists.</p>
<p >The information regarding the node's friends is store into an integer value using the bitwise operators, for his implementation check the <a href="../../src/local_lib/int_condenser.c">int_condenser.c</a> file. </p>
<h2><a class="anchor" id="autotoc_md12"></a>
Users:</h2>
<ol type="1">
<li>The user after reading the conf file attaches to the IPC resources and waits on the starting semaphore.</li>
<li>Lunch a SIGALRM to generate a transaction. (is not related to point 3)</li>
<li>Start generating transactions. until the balance allows to do so.</li>
<li>Wants to get richer, and if it is possible, it does and get back to point 3.</li>
</ol>
<p ><a class="anchor" id="autotoc_md13"></a> </p><h5>Additional info:</h5>
<p >As it has been said the user is kept in a loop until the reception of a SIGINT signal. otherwise it keeps hoping for more money to then spend. I'm totally aware of the fact that the user is kept in a loop, and can be improved by waiting for a Specific signal to resume his activity instead of waiting for a message. </p>
<h2><a class="anchor" id="autotoc_md14"></a>
Nodes:</h2>
<ol type="1">
<li>The node after reading the conf file attaches to the IPC resources and waits on the starting semaphore.</li>
<li>Lunch a SIGALRM to generate send a transaction to a random node friend. (is not related to point 3)</li>
<li>Handle transactions. In case of tp_full and hops exceeded the node advice the master via a master msg queue.</li>
<li>Add the block into the ledger.</li>
<li>back to point 3. <a class="anchor" id="autotoc_md15"></a> <h5>Additional info:</h5>
</li>
</ol>
<p >In case of SIGUSR1 the node will wait for a message containing the new friend of the node and will add it to the "list" of friends. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
