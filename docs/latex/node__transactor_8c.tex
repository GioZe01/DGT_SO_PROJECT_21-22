\hypertarget{node__transactor_8c}{}\doxysection{src/local\+\_\+lib/node\+\_\+transactor.c File Reference}
\label{node__transactor_8c}\index{src/local\_lib/node\_transactor.c@{src/local\_lib/node\_transactor.c}}
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
{\ttfamily \#include $<$sys/types.\+h$>$}\newline
{\ttfamily \#include \char`\"{}headers/simulation\+\_\+errors.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}headers/transaction\+\_\+list.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}headers/node\+\_\+transactor.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}headers/boolean.\+h\char`\"{}}\newline
Include dependency graph for node\+\_\+transactor.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{node__transactor_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{node__transactor_8c_a3cadae3112a6a16fb452b1c1f79d7238}{DEBUG\+\_\+\+NOTIFY\+\_\+\+ACTIVITY\+\_\+\+RUNNING}}(mex)
\item 
\#define \mbox{\hyperlink{node__transactor_8c_af1bd9f6cef6eeb1f8e13af06c4ec9778}{DEBUG\+\_\+\+NOTIFY\+\_\+\+ACTIVITY\+\_\+\+DONE}}(mex)
\item 
\#define \mbox{\hyperlink{node__transactor_8c_a69277eff22ca52a411c09982c8be3ac8}{DEBUG\+\_\+\+MESSAGE}}(mex)
\item 
\#define \mbox{\hyperlink{node__transactor_8c_a6c474120d64f1aa7019f35511b21c50f}{DEBUG\+\_\+\+SIGNAL}}(mex,  signum)
\item 
\#define \mbox{\hyperlink{node__transactor_8c_a051f61037f4c5dd41bccc0c6b165c001}{DEBUG\+\_\+\+ERROR\+\_\+\+MESSAGE}}(mex)
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{node__transactor_8c_afa259136136a9d42301bd3fef04fd447}{node\+\_\+create}} (struct \mbox{\hyperlink{structnode}{node}} $\ast$self, pid\+\_\+t node\+\_\+pid, int node\+\_\+id, float budget, int tp\+\_\+size, int block\+\_\+size, float percentage, \mbox{\hyperlink{node__transactor_8h_a1718c8e04c968b7d95cf3142bff81e46}{Reward}} \mbox{\hyperlink{node__transactor_8c_abe2b1e44c1b3e8f4d2ff9892303534b9}{calc\+\_\+reward}})
\item 
void \mbox{\hyperlink{node__transactor_8c_a299d12e82c779a508560581eb517e732}{free\+\_\+node}} (struct \mbox{\hyperlink{structnode}{node}} $\ast$self)
\item 
int \mbox{\hyperlink{node__transactor_8c_adacf7b2e97d8ad2355279da06d9345d3}{update\+\_\+budget}} (struct \mbox{\hyperlink{structnode}{node}} $\ast$self)
\item 
int \mbox{\hyperlink{node__transactor_8c_abe2b1e44c1b3e8f4d2ff9892303534b9}{calc\+\_\+reward}} (struct \mbox{\hyperlink{structnode}{node}} $\ast$self, float percentage, \mbox{\hyperlink{boolean_8h_afdcfe6db5bea87bd493a3fe2c513d5ef}{Bool}} use\+\_\+default, float $\ast$block\+\_\+tot\+\_\+reward)
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{node__transactor_8c_a051f61037f4c5dd41bccc0c6b165c001}\label{node__transactor_8c_a051f61037f4c5dd41bccc0c6b165c001}} 
\index{node\_transactor.c@{node\_transactor.c}!DEBUG\_ERROR\_MESSAGE@{DEBUG\_ERROR\_MESSAGE}}
\index{DEBUG\_ERROR\_MESSAGE@{DEBUG\_ERROR\_MESSAGE}!node\_transactor.c@{node\_transactor.c}}
\doxysubsubsection{\texorpdfstring{DEBUG\_ERROR\_MESSAGE}{DEBUG\_ERROR\_MESSAGE}}
{\footnotesize\ttfamily \#define DEBUG\+\_\+\+ERROR\+\_\+\+MESSAGE(\begin{DoxyParamCaption}\item[{}]{mex }\end{DoxyParamCaption})}

\mbox{\Hypertarget{node__transactor_8c_a69277eff22ca52a411c09982c8be3ac8}\label{node__transactor_8c_a69277eff22ca52a411c09982c8be3ac8}} 
\index{node\_transactor.c@{node\_transactor.c}!DEBUG\_MESSAGE@{DEBUG\_MESSAGE}}
\index{DEBUG\_MESSAGE@{DEBUG\_MESSAGE}!node\_transactor.c@{node\_transactor.c}}
\doxysubsubsection{\texorpdfstring{DEBUG\_MESSAGE}{DEBUG\_MESSAGE}}
{\footnotesize\ttfamily \#define DEBUG\+\_\+\+MESSAGE(\begin{DoxyParamCaption}\item[{}]{mex }\end{DoxyParamCaption})}

\mbox{\Hypertarget{node__transactor_8c_af1bd9f6cef6eeb1f8e13af06c4ec9778}\label{node__transactor_8c_af1bd9f6cef6eeb1f8e13af06c4ec9778}} 
\index{node\_transactor.c@{node\_transactor.c}!DEBUG\_NOTIFY\_ACTIVITY\_DONE@{DEBUG\_NOTIFY\_ACTIVITY\_DONE}}
\index{DEBUG\_NOTIFY\_ACTIVITY\_DONE@{DEBUG\_NOTIFY\_ACTIVITY\_DONE}!node\_transactor.c@{node\_transactor.c}}
\doxysubsubsection{\texorpdfstring{DEBUG\_NOTIFY\_ACTIVITY\_DONE}{DEBUG\_NOTIFY\_ACTIVITY\_DONE}}
{\footnotesize\ttfamily \#define DEBUG\+\_\+\+NOTIFY\+\_\+\+ACTIVITY\+\_\+\+DONE(\begin{DoxyParamCaption}\item[{}]{mex }\end{DoxyParamCaption})}

\mbox{\Hypertarget{node__transactor_8c_a3cadae3112a6a16fb452b1c1f79d7238}\label{node__transactor_8c_a3cadae3112a6a16fb452b1c1f79d7238}} 
\index{node\_transactor.c@{node\_transactor.c}!DEBUG\_NOTIFY\_ACTIVITY\_RUNNING@{DEBUG\_NOTIFY\_ACTIVITY\_RUNNING}}
\index{DEBUG\_NOTIFY\_ACTIVITY\_RUNNING@{DEBUG\_NOTIFY\_ACTIVITY\_RUNNING}!node\_transactor.c@{node\_transactor.c}}
\doxysubsubsection{\texorpdfstring{DEBUG\_NOTIFY\_ACTIVITY\_RUNNING}{DEBUG\_NOTIFY\_ACTIVITY\_RUNNING}}
{\footnotesize\ttfamily \#define DEBUG\+\_\+\+NOTIFY\+\_\+\+ACTIVITY\+\_\+\+RUNNING(\begin{DoxyParamCaption}\item[{}]{mex }\end{DoxyParamCaption})}

\mbox{\Hypertarget{node__transactor_8c_a6c474120d64f1aa7019f35511b21c50f}\label{node__transactor_8c_a6c474120d64f1aa7019f35511b21c50f}} 
\index{node\_transactor.c@{node\_transactor.c}!DEBUG\_SIGNAL@{DEBUG\_SIGNAL}}
\index{DEBUG\_SIGNAL@{DEBUG\_SIGNAL}!node\_transactor.c@{node\_transactor.c}}
\doxysubsubsection{\texorpdfstring{DEBUG\_SIGNAL}{DEBUG\_SIGNAL}}
{\footnotesize\ttfamily \#define DEBUG\+\_\+\+SIGNAL(\begin{DoxyParamCaption}\item[{}]{mex,  }\item[{}]{signum }\end{DoxyParamCaption})}



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{node__transactor_8c_abe2b1e44c1b3e8f4d2ff9892303534b9}\label{node__transactor_8c_abe2b1e44c1b3e8f4d2ff9892303534b9}} 
\index{node\_transactor.c@{node\_transactor.c}!calc\_reward@{calc\_reward}}
\index{calc\_reward@{calc\_reward}!node\_transactor.c@{node\_transactor.c}}
\doxysubsubsection{\texorpdfstring{calc\_reward()}{calc\_reward()}}
{\footnotesize\ttfamily int calc\+\_\+reward (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structnode}{node}} $\ast$}]{self,  }\item[{float}]{percentage,  }\item[{\mbox{\hyperlink{boolean_8h_afdcfe6db5bea87bd493a3fe2c513d5ef}{Bool}}}]{use\+\_\+default,  }\item[{float $\ast$}]{block\+\_\+tot\+\_\+reward }\end{DoxyParamCaption})}

Calculate the expected reward on the transaction block of the given node and update current node budget 
\begin{DoxyParams}{Parameters}
{\em self} & node to operate the calc on \\
\hline
{\em percentage} & the non default percentage that u want to use to calc the reward \\
\hline
{\em use\+\_\+default} & if u want to use the default percentage loaded in the node on creation time \\
\hline
{\em block\+\_\+tot\+\_\+reward} & the total block reward value \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/1 in case of FAILURE. 0 otherwise 
\end{DoxyReturn}
\mbox{\Hypertarget{node__transactor_8c_a299d12e82c779a508560581eb517e732}\label{node__transactor_8c_a299d12e82c779a508560581eb517e732}} 
\index{node\_transactor.c@{node\_transactor.c}!free\_node@{free\_node}}
\index{free\_node@{free\_node}!node\_transactor.c@{node\_transactor.c}}
\doxysubsubsection{\texorpdfstring{free\_node()}{free\_node()}}
{\footnotesize\ttfamily void free\+\_\+node (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structnode}{node}} $\ast$}]{self }\end{DoxyParamCaption})}

Free the memory from the queue list of transactions 
\begin{DoxyParams}{Parameters}
{\em self} & \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{node__transactor_8c_afa259136136a9d42301bd3fef04fd447}\label{node__transactor_8c_afa259136136a9d42301bd3fef04fd447}} 
\index{node\_transactor.c@{node\_transactor.c}!node\_create@{node\_create}}
\index{node\_create@{node\_create}!node\_transactor.c@{node\_transactor.c}}
\doxysubsubsection{\texorpdfstring{node\_create()}{node\_create()}}
{\footnotesize\ttfamily void node\+\_\+create (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structnode}{node}} $\ast$}]{self,  }\item[{pid\+\_\+t}]{node\+\_\+pid,  }\item[{int}]{node\+\_\+id,  }\item[{float}]{budget,  }\item[{int}]{tp\+\_\+size,  }\item[{int}]{block\+\_\+size,  }\item[{float}]{percentage,  }\item[{\mbox{\hyperlink{node__transactor_8h_a1718c8e04c968b7d95cf3142bff81e46}{Reward}}}]{calc\+\_\+reward }\end{DoxyParamCaption})}

Initialize the node with the given param, and the transaction list as empty 
\begin{DoxyParams}{Parameters}
{\em self} & node to be initialized \\
\hline
{\em node\+\_\+pid} & pid of the node proc associated with this struct \\
\hline
{\em node\+\_\+id} & id of the node \\
\hline
{\em budget} & initial budget of the node \\
\hline
{\em tp\+\_\+size} & size of the transaction pool \\
\hline
{\em block\+\_\+size} & size of the transaction block \\
\hline
{\em percentage} & percentage of the budget to be used for the reward \\
\hline
{\em calc\+\_\+reward} & pointer to function that calculate the reward \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{node__transactor_8c_adacf7b2e97d8ad2355279da06d9345d3}\label{node__transactor_8c_adacf7b2e97d8ad2355279da06d9345d3}} 
\index{node\_transactor.c@{node\_transactor.c}!update\_budget@{update\_budget}}
\index{update\_budget@{update\_budget}!node\_transactor.c@{node\_transactor.c}}
\doxysubsubsection{\texorpdfstring{update\_budget()}{update\_budget()}}
{\footnotesize\ttfamily int update\+\_\+budget (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structnode}{node}} $\ast$}]{self }\end{DoxyParamCaption})}

Update the budget of the node based on the processed nodes; 
\begin{DoxyParams}{Parameters}
{\em self} & node to be updated \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/1 in case of FAILURE. 0 otherwise 
\end{DoxyReturn}
