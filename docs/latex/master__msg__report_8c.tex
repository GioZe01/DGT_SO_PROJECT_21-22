\hypertarget{master__msg__report_8c}{}\doxysection{src/local\+\_\+lib/master\+\_\+msg\+\_\+report.c File Reference}
\label{master__msg__report_8c}\index{src/local\_lib/master\_msg\_report.c@{src/local\_lib/master\_msg\_report.c}}
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$errno.\+h$>$}\newline
{\ttfamily \#include $<$sys/msg.\+h$>$}\newline
{\ttfamily \#include \char`\"{}headers/master\+\_\+msg\+\_\+report.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}headers/glob.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}headers/process\+\_\+info\+\_\+list.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}headers/simulation\+\_\+errors.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}headers/debug\+\_\+utility.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}headers/transaction\+\_\+list.\+h\char`\"{}}\newline
Include dependency graph for master\+\_\+msg\+\_\+report.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{master__msg__report_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{master__msg__report_8c_a369266c24eacffb87046522897a570d5}{\+\_\+\+GNU\+\_\+\+SOURCE}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{master__msg__report_8c_af7a614d004b16a9af604bc20aaef5052}{master\+\_\+msg\+\_\+report\+\_\+create}} (struct \mbox{\hyperlink{structmaster__msg__report}{master\+\_\+msg\+\_\+report}} $\ast$self, long type, long proc\+\_\+type, pid\+\_\+t sender\+\_\+pid, short int state, float budget, struct \mbox{\hyperlink{struct_transaction}{Transaction}} t)
\item 
void \mbox{\hyperlink{master__msg__report_8c_a1a0bcafd2b8d1846c9c062f64933803c}{master\+\_\+msg\+\_\+report\+\_\+print}} (const struct \mbox{\hyperlink{structmaster__msg__report}{master\+\_\+msg\+\_\+report}} $\ast$self)
\item 
void \mbox{\hyperlink{master__msg__report_8c_ad42a72e7d4906b623c8f69162e4e9049}{from\+\_\+procstate\+\_\+to\+\_\+string}} (int state, char $\ast$string)
\item 
char $\ast$ \mbox{\hyperlink{master__msg__report_8c_a72f267f18ee542db51e5791318d61bef}{from\+\_\+proctype\+\_\+to\+\_\+string}} (long proc\+\_\+type)
\item 
char $\ast$ \mbox{\hyperlink{master__msg__report_8c_a0c0bd350e260dbcb9ea9d43150ab1468}{from\+\_\+type\+\_\+to\+\_\+string}} (long type)
\item 
int \mbox{\hyperlink{master__msg__report_8c_af8899f02009bbd24127a10a85693c055}{master\+\_\+msg\+\_\+send}} (int id, struct \mbox{\hyperlink{structmaster__msg__report}{master\+\_\+msg\+\_\+report}} $\ast$self, long type, long proc\+\_\+type, pid\+\_\+t sender\+\_\+pid, short int state, \mbox{\hyperlink{boolean_8h_afdcfe6db5bea87bd493a3fe2c513d5ef}{Bool}} create, float budget, struct \mbox{\hyperlink{struct_transaction}{Transaction}} $\ast$t)
\item 
int \mbox{\hyperlink{master__msg__report_8c_a5b0b59b8fe68d3dac53549dc54def7eb}{master\+\_\+msg\+\_\+receive}} (int id, struct \mbox{\hyperlink{structmaster__msg__report}{master\+\_\+msg\+\_\+report}} $\ast$self)
\item 
int \mbox{\hyperlink{master__msg__report_8c_aa8bf408b87d797d8d9ef136604532d13}{master\+\_\+msg\+\_\+receive\+\_\+info}} (int id, struct \mbox{\hyperlink{structmaster__msg__report}{master\+\_\+msg\+\_\+report}} $\ast$self)
\item 
int \mbox{\hyperlink{master__msg__report_8c_a585ee28bd7f9c703c6457a05bda2a417}{acknowledge}} (struct \mbox{\hyperlink{structmaster__msg__report}{master\+\_\+msg\+\_\+report}} $\ast$self, Proc\+List list)
\item 
int \mbox{\hyperlink{master__msg__report_8c_a2572db5ab2c2b87f9cd0c7cecf1a9cd3}{check\+\_\+msg\+\_\+report}} (struct \mbox{\hyperlink{structmaster__msg__report}{master\+\_\+msg\+\_\+report}} $\ast$msg\+\_\+report, int \mbox{\hyperlink{main_8c_acf2b73ea2f17461b2dc97b4722fe894e}{msg\+\_\+report\+\_\+id\+\_\+master}}, Proc\+List \mbox{\hyperlink{main_8c_a203f1362008a8171971c8ac1bd6bce04}{proc\+\_\+list}})
\item 
int \mbox{\hyperlink{master__msg__report_8c_acfcfbd83891fc949f98fe0bd39b93972}{check\+\_\+for\+\_\+termination}} (struct \mbox{\hyperlink{structmaster__msg__report}{master\+\_\+msg\+\_\+report}} $\ast$msg\+\_\+report, int \mbox{\hyperlink{main_8c_acf2b73ea2f17461b2dc97b4722fe894e}{msg\+\_\+report\+\_\+id\+\_\+master}}, int $\ast$ris, Proc\+List \mbox{\hyperlink{main_8c_a203f1362008a8171971c8ac1bd6bce04}{proc\+\_\+list}})
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{master__msg__report_8c_a369266c24eacffb87046522897a570d5}\label{master__msg__report_8c_a369266c24eacffb87046522897a570d5}} 
\index{master\_msg\_report.c@{master\_msg\_report.c}!\_GNU\_SOURCE@{\_GNU\_SOURCE}}
\index{\_GNU\_SOURCE@{\_GNU\_SOURCE}!master\_msg\_report.c@{master\_msg\_report.c}}
\doxysubsubsection{\texorpdfstring{\_GNU\_SOURCE}{\_GNU\_SOURCE}}
{\footnotesize\ttfamily \#define \+\_\+\+GNU\+\_\+\+SOURCE}



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{master__msg__report_8c_a585ee28bd7f9c703c6457a05bda2a417}\label{master__msg__report_8c_a585ee28bd7f9c703c6457a05bda2a417}} 
\index{master\_msg\_report.c@{master\_msg\_report.c}!acknowledge@{acknowledge}}
\index{acknowledge@{acknowledge}!master\_msg\_report.c@{master\_msg\_report.c}}
\doxysubsubsection{\texorpdfstring{acknowledge()}{acknowledge()}}
{\footnotesize\ttfamily int acknowledge (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structmaster__msg__report}{master\+\_\+msg\+\_\+report}} $\ast$}]{self,  }\item[{Proc\+List}]{list }\end{DoxyParamCaption})}

Based on the given master msg, load and modify the data in proc list 
\begin{DoxyParams}{Parameters}
{\em self} & the message \\
\hline
{\em list} & the list of process to be updated \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/2 in case of no sender pid in proc\+\_\+list.-\/1 in case of wrong msg\+\_\+type.-\/3 in case of TP\+\_\+\+FULL. The pid of the sender otherwise . TODO\+: Implement termination info in the list of proc (Cause that determined the termination) 
\end{DoxyReturn}
\mbox{\Hypertarget{master__msg__report_8c_acfcfbd83891fc949f98fe0bd39b93972}\label{master__msg__report_8c_acfcfbd83891fc949f98fe0bd39b93972}} 
\index{master\_msg\_report.c@{master\_msg\_report.c}!check\_for\_termination@{check\_for\_termination}}
\index{check\_for\_termination@{check\_for\_termination}!master\_msg\_report.c@{master\_msg\_report.c}}
\doxysubsubsection{\texorpdfstring{check\_for\_termination()}{check\_for\_termination()}}
{\footnotesize\ttfamily int check\+\_\+for\+\_\+termination (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structmaster__msg__report}{master\+\_\+msg\+\_\+report}} $\ast$}]{msg\+\_\+report,  }\item[{int}]{msg\+\_\+report\+\_\+id\+\_\+master,  }\item[{int $\ast$}]{ris,  }\item[{Proc\+List}]{proc\+\_\+list }\end{DoxyParamCaption})}

Get all the pids of the processes that have send a message to the master of termination type 
\begin{DoxyParams}{Parameters}
{\em msg\+\_\+report} & the message to be checked \\
\hline
{\em msg\+\_\+report\+\_\+id\+\_\+master} & id of the queue \\
\hline
{\em ris} & the list of pids \\
\hline
{\em proc\+\_\+list} & the list of processes to be checked \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/3 in case of tp\+\_\+full, -\/1 in case of failure. 0 otherwise 
\end{DoxyReturn}
\mbox{\Hypertarget{master__msg__report_8c_a2572db5ab2c2b87f9cd0c7cecf1a9cd3}\label{master__msg__report_8c_a2572db5ab2c2b87f9cd0c7cecf1a9cd3}} 
\index{master\_msg\_report.c@{master\_msg\_report.c}!check\_msg\_report@{check\_msg\_report}}
\index{check\_msg\_report@{check\_msg\_report}!master\_msg\_report.c@{master\_msg\_report.c}}
\doxysubsubsection{\texorpdfstring{check\_msg\_report()}{check\_msg\_report()}}
{\footnotesize\ttfamily int check\+\_\+msg\+\_\+report (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structmaster__msg__report}{master\+\_\+msg\+\_\+report}} $\ast$}]{msg\+\_\+report,  }\item[{int}]{msg\+\_\+report\+\_\+id\+\_\+master,  }\item[{Proc\+List}]{proc\+\_\+list }\end{DoxyParamCaption})}

Check for messages in the master msg\+\_\+queue 
\begin{DoxyParams}{Parameters}
{\em msg\+\_\+report} & pointer to the struct representing the msg in the master msg queue \\
\hline
{\em msg\+\_\+report\+\_\+id\+\_\+master} & id of the queue \\
\hline
{\em proc\+\_\+list} & list of the process to check msg for \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/1 in case of FAILURE. 2 in case of msg found. 0 otherwise 
\end{DoxyReturn}
\mbox{\Hypertarget{master__msg__report_8c_ad42a72e7d4906b623c8f69162e4e9049}\label{master__msg__report_8c_ad42a72e7d4906b623c8f69162e4e9049}} 
\index{master\_msg\_report.c@{master\_msg\_report.c}!from\_procstate\_to\_string@{from\_procstate\_to\_string}}
\index{from\_procstate\_to\_string@{from\_procstate\_to\_string}!master\_msg\_report.c@{master\_msg\_report.c}}
\doxysubsubsection{\texorpdfstring{from\_procstate\_to\_string()}{from\_procstate\_to\_string()}}
{\footnotesize\ttfamily void from\+\_\+procstate\+\_\+to\+\_\+string (\begin{DoxyParamCaption}\item[{int}]{state,  }\item[{char $\ast$}]{string }\end{DoxyParamCaption})}

Convert the given exec type into his equivalent string 
\begin{DoxyParams}{Parameters}
{\em state} & current state of the proc \\
\hline
{\em string} & var in wich the method save the equivalent string \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{master__msg__report_8c_a72f267f18ee542db51e5791318d61bef}\label{master__msg__report_8c_a72f267f18ee542db51e5791318d61bef}} 
\index{master\_msg\_report.c@{master\_msg\_report.c}!from\_proctype\_to\_string@{from\_proctype\_to\_string}}
\index{from\_proctype\_to\_string@{from\_proctype\_to\_string}!master\_msg\_report.c@{master\_msg\_report.c}}
\doxysubsubsection{\texorpdfstring{from\_proctype\_to\_string()}{from\_proctype\_to\_string()}}
{\footnotesize\ttfamily char $\ast$ from\+\_\+proctype\+\_\+to\+\_\+string (\begin{DoxyParamCaption}\item[{long}]{proc\+\_\+type }\end{DoxyParamCaption})}

Convert the given proc\+\_\+type into his relative string 
\begin{DoxyParams}{Parameters}
{\em proc\+\_\+type} & the process type to be converted \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the equivalent string 
\end{DoxyReturn}
\mbox{\Hypertarget{master__msg__report_8c_a0c0bd350e260dbcb9ea9d43150ab1468}\label{master__msg__report_8c_a0c0bd350e260dbcb9ea9d43150ab1468}} 
\index{master\_msg\_report.c@{master\_msg\_report.c}!from\_type\_to\_string@{from\_type\_to\_string}}
\index{from\_type\_to\_string@{from\_type\_to\_string}!master\_msg\_report.c@{master\_msg\_report.c}}
\doxysubsubsection{\texorpdfstring{from\_type\_to\_string()}{from\_type\_to\_string()}}
{\footnotesize\ttfamily char $\ast$ from\+\_\+type\+\_\+to\+\_\+string (\begin{DoxyParamCaption}\item[{long}]{type }\end{DoxyParamCaption})}

Convert the given type into his relative string 
\begin{DoxyParams}{Parameters}
{\em type} & the type of the message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the string equivalent 
\end{DoxyReturn}
\mbox{\Hypertarget{master__msg__report_8c_a5b0b59b8fe68d3dac53549dc54def7eb}\label{master__msg__report_8c_a5b0b59b8fe68d3dac53549dc54def7eb}} 
\index{master\_msg\_report.c@{master\_msg\_report.c}!master\_msg\_receive@{master\_msg\_receive}}
\index{master\_msg\_receive@{master\_msg\_receive}!master\_msg\_report.c@{master\_msg\_report.c}}
\doxysubsubsection{\texorpdfstring{master\_msg\_receive()}{master\_msg\_receive()}}
{\footnotesize\ttfamily int master\+\_\+msg\+\_\+receive (\begin{DoxyParamCaption}\item[{int}]{id,  }\item[{struct \mbox{\hyperlink{structmaster__msg__report}{master\+\_\+msg\+\_\+report}} $\ast$}]{self }\end{DoxyParamCaption})}

Retrive the message\+\_\+node\+\_\+report on the specified message queue \begin{DoxyWarning}{Warning}
the retriving operation is repeated until it succeed or errno != EINTR 
\end{DoxyWarning}

\begin{DoxyParams}{Parameters}
{\em id} & of the message queue \\
\hline
{\em msg} & to be caught \\
\hline
{\em type} & of the message, see MSG\+\_\+\+REPORT\+\_\+\+ABORTED\+\_\+\+PROC as exmp. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/2 in case of no msg on queue. -\/1 in case of failure. 0 otherwise 
\end{DoxyReturn}
\mbox{\Hypertarget{master__msg__report_8c_aa8bf408b87d797d8d9ef136604532d13}\label{master__msg__report_8c_aa8bf408b87d797d8d9ef136604532d13}} 
\index{master\_msg\_report.c@{master\_msg\_report.c}!master\_msg\_receive\_info@{master\_msg\_receive\_info}}
\index{master\_msg\_receive\_info@{master\_msg\_receive\_info}!master\_msg\_report.c@{master\_msg\_report.c}}
\doxysubsubsection{\texorpdfstring{master\_msg\_receive\_info()}{master\_msg\_receive\_info()}}
{\footnotesize\ttfamily int master\+\_\+msg\+\_\+receive\+\_\+info (\begin{DoxyParamCaption}\item[{int}]{id,  }\item[{struct \mbox{\hyperlink{structmaster__msg__report}{master\+\_\+msg\+\_\+report}} $\ast$}]{self }\end{DoxyParamCaption})}

Retrive the message\+\_\+node\+\_\+report on the specified message queue \begin{DoxyWarning}{Warning}
the retriving operation is repeated until it succeed or errno != EINTR 
\end{DoxyWarning}

\begin{DoxyParams}{Parameters}
{\em id} & of the message queue \\
\hline
{\em msg} & to be caught \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/2 in case of no msg on queue. -\/1 in case of failure. 0 otherwise 
\end{DoxyReturn}
\mbox{\Hypertarget{master__msg__report_8c_af7a614d004b16a9af604bc20aaef5052}\label{master__msg__report_8c_af7a614d004b16a9af604bc20aaef5052}} 
\index{master\_msg\_report.c@{master\_msg\_report.c}!master\_msg\_report\_create@{master\_msg\_report\_create}}
\index{master\_msg\_report\_create@{master\_msg\_report\_create}!master\_msg\_report.c@{master\_msg\_report.c}}
\doxysubsubsection{\texorpdfstring{master\_msg\_report\_create()}{master\_msg\_report\_create()}}
{\footnotesize\ttfamily void master\+\_\+msg\+\_\+report\+\_\+create (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structmaster__msg__report}{master\+\_\+msg\+\_\+report}} $\ast$}]{self,  }\item[{long}]{type,  }\item[{long}]{proc\+\_\+type,  }\item[{pid\+\_\+t}]{sender\+\_\+pid,  }\item[{short int}]{state,  }\item[{float}]{budget,  }\item[{struct \mbox{\hyperlink{struct_transaction}{Transaction}}}]{t }\end{DoxyParamCaption})}

Constructor for the message to be sent to the master\+\_\+proc 
\begin{DoxyParams}{Parameters}
{\em self} & the message \\
\hline
{\em type} & of the message, see MSG\+\_\+\+REPORT\+\_\+\+ABORTED\+\_\+\+PROC as exmp. \\
\hline
{\em sender\+\_\+pid} & the pid of the user to sent this msg \\
\hline
{\em state} & state of the current proc who\textquotesingle{}s sending this message \\
\hline
{\em budget} & (Optional -\/1 as value), set if type is INFO\+\_\+\+BUDGET otherwise budget set to 0 \\
\hline
{\em t} & set if type is TP\+\_\+\+FULL otherwise t set to empty \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{master__msg__report_8c_a1a0bcafd2b8d1846c9c062f64933803c}\label{master__msg__report_8c_a1a0bcafd2b8d1846c9c062f64933803c}} 
\index{master\_msg\_report.c@{master\_msg\_report.c}!master\_msg\_report\_print@{master\_msg\_report\_print}}
\index{master\_msg\_report\_print@{master\_msg\_report\_print}!master\_msg\_report.c@{master\_msg\_report.c}}
\doxysubsubsection{\texorpdfstring{master\_msg\_report\_print()}{master\_msg\_report\_print()}}
{\footnotesize\ttfamily void master\+\_\+msg\+\_\+report\+\_\+print (\begin{DoxyParamCaption}\item[{const struct \mbox{\hyperlink{structmaster__msg__report}{master\+\_\+msg\+\_\+report}} $\ast$}]{self }\end{DoxyParamCaption})}

Print the message based on his type 
\begin{DoxyParams}{Parameters}
{\em sel} & the messagge to be printed \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{master__msg__report_8c_af8899f02009bbd24127a10a85693c055}\label{master__msg__report_8c_af8899f02009bbd24127a10a85693c055}} 
\index{master\_msg\_report.c@{master\_msg\_report.c}!master\_msg\_send@{master\_msg\_send}}
\index{master\_msg\_send@{master\_msg\_send}!master\_msg\_report.c@{master\_msg\_report.c}}
\doxysubsubsection{\texorpdfstring{master\_msg\_send()}{master\_msg\_send()}}
{\footnotesize\ttfamily int master\+\_\+msg\+\_\+send (\begin{DoxyParamCaption}\item[{int}]{id,  }\item[{struct \mbox{\hyperlink{structmaster__msg__report}{master\+\_\+msg\+\_\+report}} $\ast$}]{self,  }\item[{long}]{type,  }\item[{long}]{proc\+\_\+type,  }\item[{pid\+\_\+t}]{sender\+\_\+pid,  }\item[{short int}]{state,  }\item[{\mbox{\hyperlink{boolean_8h_afdcfe6db5bea87bd493a3fe2c513d5ef}{Bool}}}]{create,  }\item[{float}]{budget,  }\item[{struct \mbox{\hyperlink{struct_transaction}{Transaction}} $\ast$}]{t }\end{DoxyParamCaption})}

(Create if option selected) and Send the message on ipc master\+\_\+msg\+\_\+queue with the given key \begin{DoxyWarning}{Warning}
send is repeated until it succeed or errno != EINTR 
\end{DoxyWarning}

\begin{DoxyParams}{Parameters}
{\em self} & the message \\
\hline
{\em type} & of the message, see MSG\+\_\+\+REPORT\+\_\+\+ABORTED\+\_\+\+PROC as exmp. \\
\hline
{\em sender\+\_\+pid} & the pid of the user to sent this msg \\
\hline
{\em state} & state of the current proc who\textquotesingle{}s sending this message \\
\hline
{\em budget} & (Optional -\/1 as value), set if type is INFO\+\_\+\+BUDGET otherwise budget set to 0 \\
\hline
{\em t} & set if type is TP\+\_\+\+FULL otherwise t set to empty \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/1 in case of failure. 0 otherwise 
\end{DoxyReturn}
